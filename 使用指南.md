# ä½¿ç”¨æŒ‡å—

æœ¬æ–‡æ¡£è¯¦ç»†ä»‹ç»å¦‚ä½•ä½¿ç”¨æ‹›è˜Agentè¿›è¡Œå€™é€‰äººæœç´¢å’Œç®¡ç†ã€‚

## åŸºæœ¬æ¦‚å¿µ

### Agentå·¥ä½œæµç¨‹
1. **æ•°æ®æŠ“å–**: ä»ŽLinkedInã€Facebookã€Xç­‰å¹³å°æœç´¢å€™é€‰äºº
2. **æ•°æ®å¤„ç†**: æ¸…æ´—ã€æ ‡å‡†åŒ–å’Œç»“æž„åŒ–å€™é€‰äººä¿¡æ¯
3. **æ•°æ®å­˜å‚¨**: å°†å¤„ç†åŽçš„æ•°æ®ä¿å­˜åˆ°Notionæ•°æ®åº“
4. **å®šæœŸæ›´æ–°**: é€šè¿‡è°ƒåº¦å™¨å®šæœŸæ‰§è¡Œä¸Šè¿°æµç¨‹

### æ•°æ®æ¥æº
- **LinkedIn**: ä¸“ä¸šç¤¾äº¤ç½‘ç»œï¼ŒåŒ…å«è¯¦ç»†çš„èŒä¸šä¿¡æ¯
- **Facebook**: ç¤¾äº¤ç½‘ç»œï¼Œä¸»è¦èŽ·å–åŸºæœ¬ä¿¡æ¯å’Œå·¥ä½œç»åŽ†
- **X (Twitter)**: å¾®åšå¹³å°ï¼Œäº†è§£å€™é€‰äººçš„ä¸“ä¸šè§‚ç‚¹å’Œæ´»è·ƒåº¦

## å‘½ä»¤è¡Œä½¿ç”¨

### åŸºæœ¬å‘½ä»¤

#### 1. è¿è¡ŒAgent
```bash
# ä½¿ç”¨é»˜è®¤é…ç½®è¿è¡Œä¸€æ¬¡
python main.py run

# æŒ‡å®šæœç´¢å…³é”®è¯
python main.py run --keywords "python developer,data scientist"

# æŒ‡å®šæœç´¢åœ°ç‚¹
python main.py run --locations "Beijing,Shanghai,Guangzhou"

# é™åˆ¶ç»“æžœæ•°é‡
python main.py run --max-results 20

# åªæœç´¢ç‰¹å®šå¹³å°
python main.py run --platform linkedin
python main.py run --platform facebook
python main.py run --platform twitter
```

#### 2. æŸ¥çœ‹çŠ¶æ€
```bash
python main.py status
```

è¾“å‡ºç¤ºä¾‹ï¼š
```
ðŸ“Š AgentçŠ¶æ€:
  é…ç½®æ–‡ä»¶: âœ… å·²åŠ è½½
  Notionè¿žæŽ¥: âœ… æ­£å¸¸
  LinkedInçˆ¬è™«: âœ… å¯ç”¨
  Facebookçˆ¬è™«: âŒ ä¸å¯ç”¨
  Twitterçˆ¬è™«: âœ… å¯ç”¨

ðŸ“ˆ æ•°æ®ç»Ÿè®¡:
  æ€»å€™é€‰äººæ•°: 156
  LinkedIn: 89
  Facebook: 23
  Twitter: 44
  æœ€åŽæ›´æ–°: 2025-07-27T10:30:00
```

#### 3. æœç´¢çŽ°æœ‰å€™é€‰äºº
```bash
# æŒ‰å§“åæœç´¢
python main.py search "å¼ ä¸‰"

# æŒ‰å…¬å¸æœç´¢
python main.py search "é˜¿é‡Œå·´å·´"

# æŒ‰èŒä½æœç´¢
python main.py search "è½¯ä»¶å·¥ç¨‹å¸ˆ"
```

#### 4. è®¾ç½®å®šæ—¶ä»»åŠ¡
```bash
# æ¯å¤©ä¸Šåˆ9ç‚¹è¿è¡Œ
python main.py schedule --cron "0 9 * * *"

# æ¯2å°æ—¶è¿è¡Œä¸€æ¬¡
python main.py schedule --interval 120

# ä½¿ç”¨é«˜çº§è°ƒåº¦å™¨
python main.py schedule --use-apscheduler --cron "0 9 * * 1-5"
```

#### 5. é…ç½®ç®¡ç†
```bash
# å¯åŠ¨é…ç½®å‘å¯¼
python main.py config
```

### é«˜çº§ç”¨æ³•

#### ç»„åˆå‚æ•°ä½¿ç”¨
```bash
# æœç´¢åŒ—äº¬çš„Pythonå¼€å‘è€…ï¼Œæœ€å¤š20ä¸ªç»“æžœï¼Œåªåœ¨LinkedInæœç´¢
python main.py run \
  --keywords "python developer" \
  --locations "Beijing" \
  --max-results 20 \
  --platform linkedin
```

#### æ‰¹é‡æ“ä½œ
```bash
# åˆ›å»ºæ‰¹é‡æœç´¢è„šæœ¬
cat > batch_search.sh << 'EOF'
#!/bin/bash
python main.py run --keywords "frontend developer" --platform linkedin
python main.py run --keywords "backend developer" --platform linkedin
python main.py run --keywords "data scientist" --platform twitter
EOF

chmod +x batch_search.sh
./batch_search.sh
```

## é…ç½®è¯¦è§£

### æœç´¢é…ç½®

#### å…³é”®è¯è®¾ç½®
```env
# å¤šä¸ªå…³é”®è¯ç”¨é€—å·åˆ†éš”
SEARCH_KEYWORDS=software engineer,data scientist,product manager,frontend developer

# æ”¯æŒä¸­è‹±æ–‡æ··åˆ
SEARCH_KEYWORDS=è½¯ä»¶å·¥ç¨‹å¸ˆ,æ•°æ®ç§‘å­¦å®¶,python developer,AI engineer
```

#### åœ°ç‚¹è®¾ç½®
```env
# æ”¯æŒåŸŽå¸‚åç§°
SEARCH_LOCATIONS=Beijing,Shanghai,Shenzhen,Hangzhou

# æ”¯æŒè‹±æ–‡åŸŽå¸‚å
SEARCH_LOCATIONS=Beijing,Shanghai,New York,San Francisco

# æ”¯æŒçœä»½/å·ž
SEARCH_LOCATIONS=California,Guangdong,Beijing
```

#### ç»“æžœæ•°é‡æŽ§åˆ¶
```env
# æ¯ä¸ªå¹³å°çš„æœ€å¤§ç»“æžœæ•°
MAX_RESULTS_PER_PLATFORM=50

# è¯·æ±‚é—´éš” (ç§’)ï¼Œé¿å…è¢«é™åˆ¶
REQUEST_DELAY=1.5
```

### å¹³å°ç‰¹å®šé…ç½®

#### LinkedIné…ç½®
```env
# æ–¹å¼1: ä½¿ç”¨ç™»å½•å‡­æ® (ä¸æŽ¨è)
LINKEDIN_USERNAME=your_email@example.com
LINKEDIN_PASSWORD=your_password

# æ–¹å¼2: ä½¿ç”¨ç¬¬ä¸‰æ–¹æœåŠ¡ (æŽ¨è)
# é…ç½®ç¬¬ä¸‰æ–¹APIå¯†é’¥
LINKEDIN_API_KEY=your_third_party_api_key
```

#### Twitteré…ç½®
```env
# æ–¹å¼1: ä½¿ç”¨Bearer Token (æŽ¨è)
TWITTER_BEARER_TOKEN=your_bearer_token

# æ–¹å¼2: ä½¿ç”¨OAuth 1.0a
TWITTER_API_KEY=your_api_key
TWITTER_API_SECRET=your_api_secret
TWITTER_ACCESS_TOKEN=your_access_token
TWITTER_ACCESS_TOKEN_SECRET=your_access_token_secret
```

#### Facebooké…ç½®
```env
# ä½¿ç”¨Graph APIè®¿é—®ä»¤ç‰Œ
FACEBOOK_ACCESS_TOKEN=your_access_token

# å¯é€‰ï¼šæŒ‡å®šAPIç‰ˆæœ¬
FACEBOOK_API_VERSION=v18.0
```

### æ—¥å¿—é…ç½®
```env
# æ—¥å¿—çº§åˆ«
LOG_LEVEL=INFO  # DEBUG, INFO, WARNING, ERROR

# æ—¥å¿—æ–‡ä»¶
LOG_FILE=logs/recruitment_agent.log

# æ—¥å¿—æ ¼å¼ (åœ¨logger.pyä¸­é…ç½®)
```

## å®šæ—¶ä»»åŠ¡è¯¦è§£

### Cronè¡¨è¾¾å¼
```bash
# æ ¼å¼: ç§’ åˆ† æ—¶ æ—¥ æœˆ å‘¨
# æ¯å¤©ä¸Šåˆ9ç‚¹
python main.py schedule --cron "0 9 * * *"

# å·¥ä½œæ—¥ä¸Šåˆ9ç‚¹
python main.py schedule --cron "0 9 * * 1-5"

# æ¯å‘¨ä¸€ä¸Šåˆ9ç‚¹
python main.py schedule --cron "0 9 * * 1"

# æ¯2å°æ—¶
python main.py schedule --cron "0 */2 * * *"

# æ¯å¤©ä¸Šåˆ9ç‚¹å’Œä¸‹åˆ5ç‚¹
python main.py schedule --cron "0 9,17 * * *"
```

### é—´éš”è°ƒåº¦
```bash
# æ¯30åˆ†é’Ÿ
python main.py schedule --interval 30

# æ¯2å°æ—¶
python main.py schedule --interval 120

# æ¯å¤© (1440åˆ†é’Ÿ)
python main.py schedule --interval 1440
```

### ç³»ç»ŸæœåŠ¡éƒ¨ç½²

#### åˆ›å»ºsystemdæœåŠ¡ (Linux)
```bash
# åˆ›å»ºæœåŠ¡æ–‡ä»¶
sudo tee /etc/systemd/system/recruitment-agent.service << 'EOF'
[Unit]
Description=Recruitment Agent
After=network.target

[Service]
Type=simple
User=ubuntu
WorkingDirectory=/path/to/recruitment-agent
Environment=PATH=/path/to/recruitment-agent/venv/bin
ExecStart=/path/to/recruitment-agent/venv/bin/python main.py schedule --cron "0 9 * * *"
Restart=always
RestartSec=10

[Install]
WantedBy=multi-user.target
EOF

# å¯ç”¨å¹¶å¯åŠ¨æœåŠ¡
sudo systemctl enable recruitment-agent
sudo systemctl start recruitment-agent

# æŸ¥çœ‹çŠ¶æ€
sudo systemctl status recruitment-agent

# æŸ¥çœ‹æ—¥å¿—
sudo journalctl -u recruitment-agent -f
```

## æ•°æ®ç®¡ç†

### Notionæ•°æ®åº“æ“ä½œ

#### æŸ¥çœ‹æ•°æ®åº“ç»“æž„
```python
from notion_integration import NotionIntegration

notion = NotionIntegration()
schema = notion.get_database_schema()
print(schema)
```

#### æ‰¹é‡å¯¼å…¥æ•°æ®
```python
from models import Candidate
from notion_integration import NotionIntegration

# å‡†å¤‡å€™é€‰äººæ•°æ®
candidates = [
    Candidate(
        name="å¼ ä¸‰",
        title="è½¯ä»¶å·¥ç¨‹å¸ˆ",
        company="é˜¿é‡Œå·´å·´",
        source_platform="LinkedIn"
    ),
    # ... æ›´å¤šå€™é€‰äºº
]

# æ‰¹é‡åˆ›å»º
notion = NotionIntegration()
page_ids = notion.batch_create_candidates(candidates)
print(f"åˆ›å»ºäº† {len(page_ids)} ä¸ªé¡µé¢")
```

#### æ•°æ®å¯¼å‡º
```python
# èŽ·å–æ‰€æœ‰å€™é€‰äºº
all_candidates = notion.get_all_candidates()

# å¯¼å‡ºä¸ºCSV
import csv
with open('candidates.csv', 'w', newline='', encoding='utf-8') as f:
    writer = csv.writer(f)
    writer.writerow(['å§“å', 'èŒä½', 'å…¬å¸', 'æ¥æºå¹³å°'])
    
    for candidate in all_candidates:
        props = candidate['properties']
        name = props.get('å§“å', {}).get('title', [{}])[0].get('text', {}).get('content', '')
        title = props.get('èŒä½', {}).get('rich_text', [{}])[0].get('text', {}).get('content', '')
        company = props.get('å…¬å¸', {}).get('rich_text', [{}])[0].get('text', {}).get('content', '')
        platform = props.get('æ¥æºå¹³å°', {}).get('select', {}).get('name', '')
        
        writer.writerow([name, title, company, platform])
```

### æ•°æ®æ¸…ç†

#### åˆ é™¤é‡å¤æ•°æ®
```python
# æŸ¥æ‰¾é‡å¤å€™é€‰äºº
seen_names = set()
duplicates = []

for candidate in all_candidates:
    name = candidate['properties']['å§“å']['title'][0]['text']['content']
    if name in seen_names:
        duplicates.append(candidate['id'])
    else:
        seen_names.add(name)

# åˆ é™¤é‡å¤é¡¹
for page_id in duplicates:
    notion.delete_candidate_page(page_id)
```

#### æ•°æ®éªŒè¯
```python
# æ£€æŸ¥å¿…å¡«å­—æ®µ
incomplete = []
for candidate in all_candidates:
    props = candidate['properties']
    name = props.get('å§“å', {}).get('title', [{}])[0].get('text', {}).get('content', '')
    if not name:
        incomplete.append(candidate['id'])

print(f"å‘çŽ° {len(incomplete)} ä¸ªä¸å®Œæ•´çš„è®°å½•")
```

## ç›‘æŽ§å’Œç»´æŠ¤

### æ—¥å¿—åˆ†æž
```bash
# æŸ¥çœ‹æœ€è¿‘çš„æ—¥å¿—
tail -f recruitment_agent.log

# æœç´¢é”™è¯¯
grep "ERROR" recruitment_agent.log

# ç»Ÿè®¡æˆåŠŸçŽ‡
grep -c "æˆåŠŸ" recruitment_agent.log
```

### æ€§èƒ½ç›‘æŽ§
```python
# æŸ¥çœ‹è¿è¡Œç»Ÿè®¡
import json
with open('agent_statistics.json', 'r') as f:
    stats = json.load(f)

# åˆ†æžæœ€è¿‘10æ¬¡è¿è¡Œ
recent_runs = stats[-10:]
avg_duration = sum(run['duration_seconds'] for run in recent_runs) / len(recent_runs)
avg_candidates = sum(run['total_candidates'] for run in recent_runs) / len(recent_runs)

print(f"å¹³å‡è¿è¡Œæ—¶é—´: {avg_duration:.2f}ç§’")
print(f"å¹³å‡å€™é€‰äººæ•°: {avg_candidates:.1f}ä¸ª")
```

### é”™è¯¯å¤„ç†

#### å¸¸è§é”™è¯¯åŠè§£å†³æ–¹æ¡ˆ

**1. Notion APIé™åˆ¶**
```
é”™è¯¯: Rate limit exceeded
è§£å†³: å¢žåŠ REQUEST_DELAYï¼Œå‡å°‘å¹¶å‘è¯·æ±‚
```

**2. LinkedInåçˆ¬æ£€æµ‹**
```
é”™è¯¯: Access denied
è§£å†³: 
- å¢žåŠ è¯·æ±‚é—´éš”
- ä½¿ç”¨ä»£ç†IP
- è€ƒè™‘ä½¿ç”¨ç¬¬ä¸‰æ–¹æœåŠ¡
```

**3. Twitter APIé…é¢è¶…é™**
```
é”™è¯¯: Rate limit exceeded
è§£å†³: 
- ç­‰å¾…é…é¢é‡ç½®
- å‡çº§APIè®¡åˆ’
- å‡å°‘æœç´¢é¢‘çŽ‡
```

**4. ç½‘ç»œè¿žæŽ¥é—®é¢˜**
```
é”™è¯¯: Connection timeout
è§£å†³:
- æ£€æŸ¥ç½‘ç»œè¿žæŽ¥
- é…ç½®ä»£ç†
- å¢žåŠ è¶…æ—¶æ—¶é—´
```

### å¤‡ä»½å’Œæ¢å¤

#### é…ç½®å¤‡ä»½
```bash
# å¤‡ä»½é…ç½®æ–‡ä»¶
cp .env .env.backup.$(date +%Y%m%d)

# å¤‡ä»½æ•´ä¸ªé¡¹ç›®
tar -czf recruitment-agent-backup-$(date +%Y%m%d).tar.gz \
  --exclude=venv \
  --exclude=__pycache__ \
  --exclude=*.log \
  .
```

#### æ•°æ®å¤‡ä»½
```python
# å¯¼å‡ºNotionæ•°æ®
import json
from notion_integration import NotionIntegration

notion = NotionIntegration()
all_data = notion.get_all_candidates()

with open(f'notion_backup_{datetime.now().strftime("%Y%m%d")}.json', 'w') as f:
    json.dump(all_data, f, indent=2, ensure_ascii=False)
```

## æœ€ä½³å®žè·µ

### 1. æœç´¢ç­–ç•¥
- ä½¿ç”¨å…·ä½“çš„èŒä½å…³é”®è¯è€Œéžæ³›æ³›çš„æè¿°
- ç»“åˆåœ°ç‚¹å’ŒæŠ€èƒ½è¿›è¡Œç²¾å‡†æœç´¢
- å®šæœŸæ›´æ–°æœç´¢å…³é”®è¯ä»¥èŽ·å–æ–°çš„å€™é€‰äºº

### 2. æ•°æ®è´¨é‡
- å®šæœŸæ£€æŸ¥å’Œæ¸…ç†é‡å¤æ•°æ®
- éªŒè¯è”ç³»ä¿¡æ¯çš„æœ‰æ•ˆæ€§
- åŠæ—¶æ›´æ–°å€™é€‰äººçŠ¶æ€

### 3. åˆè§„ä½¿ç”¨
- éµå®ˆå„å¹³å°çš„ä½¿ç”¨æ¡æ¬¾
- å°Šé‡å€™é€‰äººéšç§
- é¿å…è¿‡åº¦é¢‘ç¹çš„è¯·æ±‚

### 4. æ€§èƒ½ä¼˜åŒ–
- åˆç†è®¾ç½®è¯·æ±‚é—´éš”
- ä½¿ç”¨ç¼“å­˜å‡å°‘é‡å¤è¯·æ±‚
- ç›‘æŽ§APIä½¿ç”¨é…é¢

### 5. å®‰å…¨è€ƒè™‘
- å®šæœŸè½®æ¢APIå¯†é’¥
- ä½¿ç”¨çŽ¯å¢ƒå˜é‡å­˜å‚¨æ•æ„Ÿä¿¡æ¯
- é™åˆ¶ç½‘ç»œè®¿é—®æƒé™

## æ•…éšœæŽ’é™¤

### è¯Šæ–­å·¥å…·
```bash
# æ£€æŸ¥ç³»ç»ŸçŠ¶æ€
python main.py status

# è¿è¡Œè¯Šæ–­
python -c "
import sys
print(f'Pythonç‰ˆæœ¬: {sys.version}')
print(f'å·¥ä½œç›®å½•: {os.getcwd()}')

try:
    import requests
    print('âœ… requestså¯ç”¨')
except ImportError:
    print('âŒ requestsä¸å¯ç”¨')

# ... æ£€æŸ¥å…¶ä»–ä¾èµ–
"

# æµ‹è¯•ç½‘ç»œè¿žæŽ¥
python -c "
import requests
try:
    r = requests.get('https://api.notion.com', timeout=5)
    print('âœ… Notion APIå¯è¾¾')
except:
    print('âŒ Notion APIä¸å¯è¾¾')
"
```

### è°ƒè¯•æ¨¡å¼
```bash
# å¯ç”¨è¯¦ç»†æ—¥å¿—
export LOG_LEVEL=DEBUG
python main.py run

# å•æ­¥è°ƒè¯•
python -m pdb main.py run
```

---

æ›´å¤šé«˜çº§ç”¨æ³•å’ŒæŠ€å·§ï¼Œè¯·å‚è€ƒ [APIæ–‡æ¡£](API.md) å’Œ [å¼€å‘æŒ‡å—](DEVELOPMENT.md)ã€‚

