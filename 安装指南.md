# 安装指南

本文档提供了招聘Agent的详细安装和配置说明。

## 系统要求

### 操作系统
- Linux (推荐 Ubuntu 20.04+)
- macOS 10.15+
- Windows 10+ (需要WSL或Git Bash)

### 软件要求
- Python 3.11 或更高版本
- pip (Python包管理器)
- Git
- Chrome浏览器 (用于LinkedIn功能)

### 硬件要求
- 内存: 最少2GB，推荐4GB+
- 存储: 最少1GB可用空间
- 网络: 稳定的互联网连接

## 安装步骤

### 1. 环境准备

#### 检查Python版本
```bash
python3 --version
# 应该显示 Python 3.11.x 或更高版本
```

如果Python版本过低，请升级：

**Ubuntu/Debian:**
```bash
sudo apt update
sudo apt install python3.11 python3.11-pip python3.11-venv
```

**macOS (使用Homebrew):**
```bash
brew install python@3.11
```

**Windows:**
从 [Python官网](https://www.python.org/downloads/) 下载并安装最新版本。

#### 安装Git
**Ubuntu/Debian:**
```bash
sudo apt install git
```

**macOS:**
```bash
brew install git
```

**Windows:**
从 [Git官网](https://git-scm.com/download/win) 下载并安装。

#### 安装Chrome浏览器
**Ubuntu/Debian:**
```bash
wget -q -O - https://dl.google.com/linux/linux_signing_key.pub | sudo apt-key add -
sudo sh -c 'echo "deb [arch=amd64] http://dl.google.com/linux/chrome/deb/ stable main" >> /etc/apt/sources.list.d/google-chrome.list'
sudo apt update
sudo apt install google-chrome-stable
```

**macOS:**
```bash
brew install --cask google-chrome
```

**Windows:**
从 [Chrome官网](https://www.google.com/chrome/) 下载并安装。

### 2. 项目下载

```bash
# 克隆项目
git clone https://github.com/your-username/recruitment-agent.git
cd recruitment-agent
```

### 3. 虚拟环境设置 (推荐)

```bash
# 创建虚拟环境
python3 -m venv venv

# 激活虚拟环境
# Linux/macOS:
source venv/bin/activate
# Windows:
# venv\Scripts\activate
```

### 4. 依赖安装

```bash
# 升级pip
pip install --upgrade pip

# 安装项目依赖
pip install -r requirements.txt
```

如果遇到安装问题，可以尝试：
```bash
# 使用国内镜像源 (中国用户)
pip install -r requirements.txt -i https://pypi.tuna.tsinghua.edu.cn/simple/

# 或者逐个安装关键依赖
pip install requests beautifulsoup4 selenium notion-client tweepy python-dotenv
```

### 5. 验证安装

```bash
# 运行测试
python run_tests.py

# 运行演示
python demo.py
```

如果看到测试通过和演示成功运行，说明安装正确。

## API配置

### 1. Notion API设置 (必需)

#### 创建Notion集成
1. 访问 [Notion开发者页面](https://www.notion.so/my-integrations)
2. 点击 "New integration"
3. 填写集成名称，如 "Recruitment Agent"
4. 选择工作空间
5. 点击 "Submit" 创建集成
6. 复制 "Internal Integration Token"

#### 创建数据库
1. 在Notion中创建一个新页面
2. 添加一个数据库
3. 点击数据库右上角的 "..." 菜单
4. 选择 "Add connections"
5. 选择刚创建的集成
6. 复制数据库URL中的ID部分

数据库URL格式：`https://www.notion.so/workspace/DATABASE_ID?v=...`

#### 配置数据库结构
Agent会自动创建所需的属性，但您也可以手动添加：

| 属性名 | 类型 |
|--------|------|
| 姓名 | Title |
| 职位 | Text |
| 公司 | Text |
| 地点 | Text |
| 领英主页 | URL |
| Facebook主页 | URL |
| X主页 | URL |
| 联系邮箱 | Email |
| 联系电话 | Phone |
| 技能 | Multi-select |
| 工作经验 | Text |
| 教育背景 | Text |
| 来源平台 | Select |
| 最后更新时间 | Date |
| 备注 | Text |

### 2. Twitter API设置 (可选)

#### 申请开发者账户
1. 访问 [Twitter开发者平台](https://developer.twitter.com/)
2. 申请开发者账户
3. 创建新的App
4. 获取API密钥

#### 获取Bearer Token
1. 在App设置中找到 "Keys and tokens"
2. 复制 "Bearer Token"

### 3. Facebook API设置 (可选)

#### 创建Facebook应用
1. 访问 [Facebook开发者平台](https://developers.facebook.com/)
2. 创建新应用
3. 添加 "Facebook Login" 产品
4. 获取访问令牌

### 4. LinkedIn设置 (谨慎使用)

LinkedIn没有公开的搜索API，Agent使用模拟浏览器的方式。这种方法：
- 可能违反LinkedIn使用条款
- 容易被检测和封禁
- 仅建议用于个人研究和学习

如果要使用，需要提供LinkedIn登录凭据。

## 环境变量配置

### 方法1: 使用配置向导
```bash
python main.py config
```

### 方法2: 手动创建.env文件
```bash
cp .env.example .env
# 然后编辑.env文件
```

### 方法3: 直接设置环境变量
```bash
export NOTION_API_KEY="your_notion_api_key"
export NOTION_DATABASE_ID="your_database_id"
export TWITTER_BEARER_TOKEN="your_twitter_token"
# ... 其他变量
```

## 测试配置

### 1. 检查配置
```bash
python main.py status
```

### 2. 测试Notion连接
```bash
python -c "
from notion_integration import NotionIntegration
try:
    notion = NotionIntegration()
    print('✅ Notion连接成功')
except Exception as e:
    print(f'❌ Notion连接失败: {e}')
"
```

### 3. 测试Twitter连接
```bash
python -c "
from scrapers.twitter_scraper import TwitterScraper
try:
    twitter = TwitterScraper()
    print('✅ Twitter连接成功')
except Exception as e:
    print(f'❌ Twitter连接失败: {e}')
"
```

## 常见问题

### 1. Python版本问题
**问题**: `python3: command not found`
**解决**: 
- 确保Python已正确安装
- 尝试使用 `python` 而不是 `python3`
- 检查PATH环境变量

### 2. 依赖安装失败
**问题**: pip安装某些包失败
**解决**:
```bash
# 升级pip
pip install --upgrade pip

# 安装构建工具
# Ubuntu/Debian:
sudo apt install build-essential python3-dev
# macOS:
xcode-select --install

# 使用conda (如果可用)
conda install -c conda-forge package_name
```

### 3. Chrome驱动问题
**问题**: Selenium无法启动Chrome
**解决**:
```bash
# 检查Chrome版本
google-chrome --version

# 手动下载对应版本的ChromeDriver
# 或者使用webdriver-manager自动管理
pip install webdriver-manager
```

### 4. Notion API错误
**问题**: `Unauthorized` 或 `Forbidden`
**解决**:
- 检查API密钥是否正确
- 确保集成已添加到数据库
- 验证数据库ID格式

### 5. 网络连接问题
**问题**: 请求超时或连接失败
**解决**:
- 检查网络连接
- 配置代理 (如果需要)
- 增加请求超时时间

## 性能优化

### 1. 调整请求频率
```env
REQUEST_DELAY=2.0  # 增加请求间隔
MAX_RESULTS_PER_PLATFORM=20  # 减少结果数量
```

### 2. 使用代理
```python
# 在scrapers/base_scraper.py中配置代理
self.session.proxies = {
    'http': 'http://proxy:port',
    'https': 'https://proxy:port'
}
```

### 3. 启用日志
```env
LOG_LEVEL=DEBUG
LOG_FILE=recruitment_agent.log
```

## 部署建议

### 1. 生产环境
- 使用虚拟环境
- 配置系统服务 (systemd)
- 设置日志轮转
- 监控和告警

### 2. 云部署
- AWS Lambda / Google Cloud Functions
- Docker容器化
- 定时触发器

### 3. 安全考虑
- 不要在代码中硬编码API密钥
- 使用环境变量或密钥管理服务
- 定期轮换API密钥
- 限制网络访问

## 获取帮助

如果遇到安装问题：

1. 查看 [常见问题](FAQ.md)
2. 搜索 [GitHub Issues](https://github.com/your-username/recruitment-agent/issues)
3. 创建新的Issue并提供：
   - 操作系统和版本
   - Python版本
   - 错误信息和日志
   - 重现步骤

---

安装完成后，请查看 [使用指南](USAGE.md) 了解如何使用Agent。

